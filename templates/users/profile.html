{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<div class="container">
  <div class='row'>
    <div class="col-sm-6 col-md-6 col-lg-4">
      <h3>Profile</h3>
      <ul class="list-unstyled">
        <li>First name: <strong>{{user.first_name}}</strong></li>
        <li>Last name: <strong>{{user.last_name}}</strong></li>
        <li>Display name: <strong>{{user.display_name}}</strong></li>
        <li>Email: <strong>{{user.email}}</strong></li>
        <li>{% if request.user.profile.account_verified %}Verified{% else %}Unverified{% endif %}</li>
      </ul>
      <a href="{% url 'account_edit' %}">Edit</a>
    </div>
    <div class="col-sm-6 col-md-6 col-lg-4">
      <h3> Account Connections </h3>
      {% if form.accounts %}
      <p>You can sign in to your account using any of the following third party accounts:</p>
      <form method="post" action="{% url 'socialaccount_connections' %}">
        {% csrf_token %}
        <fieldset>
          {% if form.non_field_errors %}

          <div id="errorMsg">{{ form.non_field_errors }}</div>

          {% endif %}
          {% for base_account in form.accounts %}
          {% with base_account.get_provider_account as account %}

          <div>
            <label for="id_account_{{ base_account.id }}">
              <input id="id_account_{{ base_account.id }}" type="radio" name="account" value="{{ base_account.id }}"/>
              <span class="socialaccount_provider {{ base_account.provider }} {{ account.get_brand.id }}">{{account.get_brand.name}}</span>
              {{ account }}
            </label>
          </div>
          
          {% endwith %}
          {% endfor %}

          <div>
            <button type="submit">Remove</button>
          </div>
        </fieldset>
      </form>

      {% else %}
      <p>You currently have no social network accounts connected to this account.</p>
      {% endif %}

      <p> Add a 3rd Party Account </p>

      <ul class="socialaccount_providers">
      {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
      </ul>

    </div>
  </div>
</div>
{% endblock content %}
